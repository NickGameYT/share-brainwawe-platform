{"version":3,"file":"6-DshcwEfb.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(main-ideas)/ideas/new/_page.server.js","../../../.svelte-kit/adapter-node/nodes/6.js"],"sourcesContent":["import { d as db } from \"../../../../../chunks/prisma.js\";\nimport { r as redirect, f as fail } from \"../../../../../chunks/index.js\";\nimport { z } from \"zod\";\nconst ideaSchema = z.object({\n  title: z.string().trim().min(5, { message: \"Заголовок слишком короткий\" }),\n  description: z.string().trim().min(10, { message: \"Описание слишком короткое\" }),\n  userId: z.string({ required_error: \"User ID is required\" }).min(6, \"User ID is too short\")\n});\nasync function load({ locals }) {\n  if (!locals.user) {\n    redirect(307, \"/\");\n  }\n  return { user: locals.user };\n}\nconst actions = {\n  default: async ({ request, locals }) => {\n    const form = Object.fromEntries(await request.formData());\n    const { data, error, success } = ideaSchema.safeParse({\n      ...form,\n      // @ts-ignore\n      userId: locals.user.id\n    });\n    if (!success) {\n      const errors = error.flatten().fieldErrors;\n      return fail(400, { errors });\n    }\n    try {\n      await db.idea.create({\n        data: {\n          title: data.title,\n          description: data.description,\n          userId: data.userId\n        }\n      });\n    } catch (_e) {\n      console.log(\"ERROR:\", _e);\n      return fail(400, { message: _e.message });\n    }\n    redirect(307, \"/ideas\");\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/(main-ideas)/ideas/new/_page.server.js';\n\nexport const index = 6;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/(main-ideas)/ideas/new/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(main-ideas)/ideas/new/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/6.CiTjh3rE.js\",\"_app/immutable/chunks/scheduler.ChSTGxN4.js\",\"_app/immutable/chunks/index.zzQGVg1l.js\",\"_app/immutable/chunks/forms.CeeC4T9X.js\",\"_app/immutable/chunks/entry.BauIi3_i.js\",\"_app/immutable/chunks/Toaster.svelte_svelte_type_style_lang.BRJiNN0q.js\"];\nexport const stylesheets = [\"_app/immutable/assets/Toaster.DQwrSZtH.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;;AAGA,MAAM,UAAU,GAAG,CAAC,CAAC,MAAM,CAAC;AAC5B,EAAE,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,4BAA4B,EAAE,CAAC;AAC5E,EAAE,WAAW,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC;AAClF,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,cAAc,EAAE,qBAAqB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,sBAAsB;AAC3F,CAAC,CAAC;AACF,eAAe,IAAI,CAAC,EAAE,MAAM,EAAE,EAAE;AAChC,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;AACpB,IAAI,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC;AACtB;AACA,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE;AAC9B;AACA,MAAM,OAAO,GAAG;AAChB,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK;AAC1C,IAAI,MAAM,IAAI,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM,OAAO,CAAC,QAAQ,EAAE,CAAC;AAC7D,IAAI,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,UAAU,CAAC,SAAS,CAAC;AAC1D,MAAM,GAAG,IAAI;AACb;AACA,MAAM,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC;AAC1B,KAAK,CAAC;AACN,IAAI,IAAI,CAAC,OAAO,EAAE;AAClB,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC,WAAW;AAChD,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,MAAM,EAAE,CAAC;AAClC;AACA,IAAI,IAAI;AACR,MAAM,MAAM,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;AAC3B,QAAQ,IAAI,EAAE;AACd,UAAU,KAAK,EAAE,IAAI,CAAC,KAAK;AAC3B,UAAU,WAAW,EAAE,IAAI,CAAC,WAAW;AACvC,UAAU,MAAM,EAAE,IAAI,CAAC;AACvB;AACA,OAAO,CAAC;AACR,KAAK,CAAC,OAAO,EAAE,EAAE;AACjB,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC;AAC/B,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,EAAE,CAAC,OAAO,EAAE,CAAC;AAC/C;AACA,IAAI,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC;AAC3B;AACA,CAAC;;;;;;;;ACtCW,MAAC,KAAK,GAAG;AACrB,IAAI,eAAe;AACP,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAyD,CAAC,EAAE;AAEvH,MAAC,SAAS,GAAG;AACb,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,6CAA6C,CAAC,yCAAyC,CAAC,yCAAyC,CAAC,yCAAyC,CAAC,yEAAyE;AACtS,MAAC,WAAW,GAAG,CAAC,4CAA4C;AAC5D,MAAC,KAAK,GAAG;;;;"}